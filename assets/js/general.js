const selNavToggleParent="body > #__next > div >div:nth-child(2)",selMessageScrollSection="main > .overflow-hidden > div > div",selPromptingTextarea="main form textarea",getLastMessage=()=>(messages=document.querySelectorAll(".text-base .markdown"))[messages.length-1],getAllUserMessages=()=>document.querySelectorAll(".dark\\:bg-gray-800 > .text-base");function waitForElement(t,n,e=5e3,o=100,r=null){const a=Date.now()+e,l=setInterval(()=>{var e=document.querySelector(t);e&&(clearInterval(l),n(e)),Date.now()>=a&&(clearInterval(l),r)&&r()},o)}function waitForRemoveElement(e,t,n=6e4,o=100,r=null){const a=Date.now()+n,l=setInterval(()=>{document.querySelector(e)||(t(),clearInterval(l)),Date.now()>=a&&(clearInterval(l),r)&&r()},o)}function waitForChangeElementText(t,n,o,e=6e4,r=100,a=null){const l=Date.now()+e,i=setInterval(()=>{var e=document.querySelector(t);e&&e.innerText===n||(o(),clearInterval(i)),Date.now()>=l&&(clearInterval(i),a)&&a()},r)}function handleStorage(e,t,n,o=()=>{},r="sync"){var a=chrome.storage[r];switch(e){case"get":a.get(t,e=>{o(e[t])});break;case"set":var l={};l[t]=n,a.set(l,()=>{o()});break;case"ask":a.get(t,e=>{e=void 0!==e[t];o(e)})}}function popup(e,t,n,o){const r=document.createElement("section");r.id="popup",r.style.cssText="top: 0; left: 0; position: fixed; height: 100vh; width: 100vw; z-index: 10000 !important; display: grid; place-items:center;";var a=document.createElement("div"),a=(a.style.cssText="position: absolute; width: 100%; height: 100%; background: hsl(0deg 0% 12% / 50%); z-index: -1; cursor: pointer;",a.onclick=()=>r.remove(),r.appendChild(a),o||"noName"),l=document.createElement("div"),a=(l.innerHTML=`
        <div class="gpt-optimizer gpto-popupHeader ${a}">
            <span>${o}</span>
            <button><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
        </div>
        <div class="gpt-optimizer gpto-popupContentWrap">
            ${e}
        </div>`,l.id="toastHTML",l.style.cssText="max-height: 400px; max-width: 600px; width: 100%; min-height: 200px; height: fit-content; padding-bottom: 1rem; overflow-x: scroll; display: flex; flex-direction: column;",l.className="gpt-optimizer gpto-popupInner",r.appendChild(l),document.createElement("style"));a.innerHTML=t,r.appendChild(a),document.body.appendChild(r),r.querySelector(".gpto-popupInner > div:nth-child(1) > button").addEventListener("click",()=>{r.remove()}),r.close=()=>{r.remove()},n(r)}function getDate(e=0){var t=new Date;return t.getFullYear()+`-${(t.getMonth()+1).toString().padStart(2,"0")}-`+t.getDate().toString().padStart(2,"0")}